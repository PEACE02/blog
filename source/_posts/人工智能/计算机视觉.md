---
title: 计算机视觉 | 期末复习整理
date: 2023-02-01
katex: true
categories:
- 人工智能
tags: 
- 计算机视觉
keywords: 
- 计算机视觉
- 深大期末复习
description: 根据老师授课PPT内容自行整理，不一定是重点，自己复习用。
cover: https://s2.loli.net/2023/02/01/KhO1pQ529Zs3EFt.jpg
---

根据老师授课PPT内容自行整理，不一定是重点，自己复习用。

---

# 第一章 图像成像以及表示
## 光和电磁波谱
电磁波谱的可见光波段约为：0.43μm(紫色) ~ 0.79μm(红色)
## 摄像头系统总体结构
1. 镜头 (LENS)
2. 图像传感器 (SENSOR)
3. 数字信号处理芯片 (DSP)
## 近红外成像
- 近红外：700-1000 nm
## 远红外成像
- 远红外：2000-14000 nm
- 热辐射
    - 绝对零度 (-273℃) 以上的物体
    - 大气窗口 3000-5000, 8000-14000
- 热成像仪
    - 接收红外光辐射
    - 产生物体变化
    - 转化成电信号
    - 碲镉汞、锑化铟、铂化硅、氧化钒、硅掺杂（或多晶硅）等等
## 多光谱成像
机载设备、卫星、手持设备...
## B 超
- 人耳能听到的声音频率为 20Hz - 20KHz，低于 20Hz 的声波频率为次声波，高于 20 KHz 的波为超声波。
- **B 超是用平面图形的形式来显示被探查组织的具体情况。**
## 超声波的特点
1. 超声波频率高、波长短，可以像光那样沿直线传播，使得我们有可能向某已确定方向上发射超声波；
2. 声波是纵波，可以顺利地在人体组织里传播；
3. 超声波遇到不同的介质交接面时会产生反射波，这些特点构成了今天超声仪器在医学领域广泛应用的基础。
## B 超成像的基本原理
## X 光
## X 射线成像原理
## CT 成像原理
## 磁共振现象 (MR)
## MRI 成像原理
## 什么是图像？
- 定义为二维函数 f(x, y)，其中 x, y 是空间坐标，f(x, y) 是点 (x, y) 的幅值；
- 灰度图像是一个二维灰度（或亮度）函数 f(x, y)；
- 彩色图像由三个（如RGB, HSV）二维灰度（或亮度）函数 f(x, y) 组成。
## 数字图像的像素表示
数字图像由二维的元素组成，每一个元素具有一个特定的位置 (x, y) 和幅值 f(x, y)，这些元素就被称为像素。
## 什么是数字图像？
- 像素组成的二维排列，可以用矩阵表示；
- 对于单色（灰度）图像而言，每个像素的亮度用一个数值来表示，通常数值范围在 0 - 255 之间，0 表示黑、255 表示白，其他值表示处于黑白之间的灰度；
- 彩色图像可以用红、绿、蓝三元组的二维矩阵来表示。通常，三元组的每个数值也是在 0 - 255 之间，0 表示相应的基色在该像素中没有，而 255 则代表相应的基色在该像素中取得最大值。
## 相邻像素
### 4邻域
- 像素 p(x, y) 的4邻域是 (x + 1, y), (x - 1, y), (x, y + 1), (x, y - 1)；
- 用 $N_4(p)$ 表示像素p的4邻域（上、下、左、右）。
### D邻域
- 像素 p(x, y) 的D邻域是 (x + 1, y + 1), (x + 1, y - 1), (x - 1, y + 1), (x - 1, y - 1)；
- 用 $N_D(p)$ 表示像素p的D邻域（四个对角上的点）。
### 8邻域
- 像素 p(x, y) 的8邻域是 4邻域的点 + D邻域的点；
- 用 $N_8(p)$ 表示像素p的8邻域（九宫格内其他八个点）。
  $N_8(p)$ = $N_4(p)$ + $N_D(p)$
## 像素的连通性：距离
### 像素之间距离的定义
对于像素 p、q 和 z，分别具有坐标 (x, y), (s, t), (u, v)，如果：
1. D(p, q) >= 0, D(p, q) = 0 当且仅当 p = q
2. D(p, q) = D(q, p)
3. D(p, z) <= D(p, q) + D(q, z)

则称 D 是距离函数或度量。
### 欧式距离定义
- 像素 p(x, y) 和 q(s, t) 间的欧式距离定义如下：
$$D_{e}(p, q)=\sqrt{(x-s)^{2}+(y-t)^{2}}$$
- 具有与 (x, y) 距离小于等于某个值 r 的像素是：包含在以 (x, y) 为圆心，以 r 为半径的原平面。
### D₄距离（城市距离、曼哈顿距离）
- 像素 p(x, y) 和 q(s, t) 之间的D₄距离定义为：
$$D_4(p, q)=|x-s|+|y-t|$$
- 具有与 (x, y) 距离小于等于某个值 r 的那些像素形成一个菱形。
### D₈距离（棋盘距离、切比雪夫距离）
像素 p(x, y) 和 q(s, t) 之间的D₈距离定义为：
$$D_8(p, q)=max(|x-s|, |y-t|)$$
## 数字图像的基本文件格式
- 每一种图像文件均有一个文件头，在文件头之后才是图像数据；
- 文件头的内容一般包括文件类型、文件制作者、制作时间、版本号、文件大小等内容；
- 图像文件还涉及图像文件的压缩方式和存储效率等；
- 常用的图像文件存储格式主要有BMP文件、JPG文件、PCX文件、TIFF文件以及GIF文件等。

---

# 第二章 图像增强、灰度变换、直方图
## 图像增强的基本概念
### 图像增强
- 图像增强是使图像更适合于特定应用的图像处理技术
- 图像增强效果的评价是高度主观的过程
- 不存在对任何图像都通用的增强的理论
### 图像增强分类
图像增强主要分为两大类：
- 空间域图像增强
- 频率域图像增强
### 空间域
- 空间域是指图像平面自身
- 空间域图像增强技术主要以图像像素直接处理为基础
### 空间域图像增强分类
空间域图像增强主要分为两大类：
- 点运算：基本灰度变换，直方图处理
  算术 / 逻辑操作增强属于多图像集点运算
- 邻域运算：平滑空间滤波器，锐化（边缘）空间滤波器
### 空间域图像增强定义
空间域增强是指增强构成图像的像素，可由下式定义：
$$ g(x, y) = T[f(x, y)] $$
其中 $f(x, y)$ 是输入图像，$g(x, y)$ 是输出图像，_T_ 是对 _f_ 的一种操作，其定义在 $(x, y)$ 的邻域。
- T 一般表示 f 在像素 (x, y) 邻域的一种操作
- T 有时表示图像集（本课程只在图像算术 / 逻辑操作增强中才这样使用，其他情况皆指邻域）

空间域增强的简化形式：$s = T(r)$
r 是 $f(x, y)$ 在任意点 (x, y) 的灰度级
s 是 $g(x, y)$ 在任意点 (x, y) 的灰度级
![](https://s2.loli.net/2023/02/02/WTCesvzK8LJlGfV.png)
更大的邻域会有更多的灵活性，一般的方法是利用点 (x, y) 事先定义的邻域里的一个 f 值的函数来决定 g 在 (x, y) 的值，主要是利用所谓的**模板**（也称为**滤波器、核、掩膜**）。
模板是一个小的（比如 3x3）二维阵列，模板的系数值决定了处理的性质，如图像尖锐化等，以这种方法为基础的增强技术通常是指**模板处理**或**滤波**。
### 邻域
- 邻域：也称模板、滤波器、核、掩膜、窗口
- 邻域一般定义为以某像素为中心的小的二维阵列
- 一般取 3x3 二维阵列
- 当邻域为 1x1 二维阵列时，邻域变为点
- 对邻域为 1x1 的运算，称点运算；其余称邻域运算
### 点运算
灰度级变换函数 $s = T(r)$，有三种基本类型：
- 线性的（正比或反比）
- 对数的（对数和反对数的）
- 幂次的（n 次幂和 n 次方根变换）
![](https://s2.loli.net/2023/02/02/XSZevEnH2sViUTo.png)
## 基本灰度变换
### 灰度变换概念
- 灰度变换是最简单的点运算图像增强技术
- 灰度变换是对图像对比度进行处理的方法
- 灰度变换中，任何一个像素变换后的值 s，只与该像素变换前的值 r 相关，即：
  $$ s = T(r) $$
### 图像反转
- 灰度级范围为 [0, L - 1] 的图像，其反转变换为：s = L - 1 - r
![](https://s2.loli.net/2023/02/02/uRB4M15mcHDI8ZF.png)
![](https://s2.loli.net/2023/02/02/KR4DPrwh7mok52L.png)
- 适合增强嵌入于图像暗色区域的白色细节，特别是当黑色面积占主导地位时
![](https://s2.loli.net/2023/02/02/z5EU2GD43pKIXrm.png)
### 对数变换
- 灰度级范围为 [0, L - 1] 的图像，其对数变换为：$s = c log (1 + r)$
![](https://s2.loli.net/2023/02/02/COHL25cmizRFpYI.png)
- 使窄带低灰度输入图像值映射为一宽带输出值
![](https://s2.loli.net/2023/02/02/ncr87eI96JdALkO.png)
### 幂次变换
- 灰度级范围为 [0, L - 1] 的图像，其幂次变换为：$s = c r^γ$
![](https://s2.loli.net/2023/02/02/RxjpKAPeQwLcHTr.png)
- 幂次变换也叫伽马校正，是一种更加灵活的对比度增强方法
![](https://s2.loli.net/2023/02/02/EWCiSRwpVl3MJso.png)
- 幂次变换对图像偏亮和偏暗都可以进行增强
![](https://s2.loli.net/2023/02/02/kLOJfA9UapovqjI.png)
### 分段线性变换函数
- 变换函数由多个折线组成
  $$ s' = \frac{s_1}{r_1}r   (0 ≤ r ＜ r_1)$$
  $$ s'' = \frac{s_2 - s_1}{r_2 - r_1}(r - r_1) + s_1   (r_1 ≤ r ＜ r_2) $$
  $$ s''' = \frac{L - 1 - s_2}{L - 1 - r_2}(r - r_2) + s_2    (r_2 ≤ r ≤ L - 1) $$
![](https://s2.loli.net/2023/02/02/pAfWoh16kHEbiBd.png)
- 对比度拉伸：按需要，将集中在某些段的对比度增强
![](https://s2.loli.net/2023/02/02/ehmt7uwVl54rsCO.png)
- 当 $s_1 = 0$，$s_2 = L - 1$，且 $r_1 = r_2$，称灰度图像二值化
$$ s' = \frac{s_1}{r_1}r    (0 ≤ r ＜ r_1)$$
$$ s''' = \frac{L - 1 - s_2}{L - 1 - r_2}(r - r_2) + s_2 = s_2 = L - 1    (r_2 ≤ r ≤ L - 1)$$
![](https://s2.loli.net/2023/02/02/l15JR9VxndvzsGE.png)
- 灰度切割：提高特定范围灰度的幅值，其余灰度保持不变（左图）或变暗（右图）
![](https://s2.loli.net/2023/02/02/mF2uB9HU8IboEig.png)
- 灰度切割举例：提高中间灰度的幅值，其余灰度变暗
![](https://s2.loli.net/2023/02/02/cYIXJkFQO58EmWx.png)
## 算术 / 逻辑操作
### 图像逻辑运算
图像逻辑运算指对两幅输入图像，每对点（像素）进行逻辑处理（按位求与、按位求或、输出最大值、按位求异或、相加求模等），最终得到一幅新的输出图像的运算。
### 图像逻辑运算定义
设 $f(x, y)$ 和 $h(x, y)$ 为两幅输入图像，则：
- 与运算：$g(x, y) = AND[f(x, y), h(x, y)]$
- 或运算：$g(x, y) = OR[f(x, y), h(x, y)]$
- 求最大值运算：$g(x, y) = MAX[f(x, y), h(x, y)]$
- 异或运算：$g(x, y) = XOR[f(x, y), h(x, y)]$
- 求模运算：$g(x, y) = [f(x, y) + 128] mod 256$
### 图像算术运算
图像算术运算指两幅输入图像进行点对点的加、减、乘、除计算而得到输出图像的运算。
### 图像算术运算定义
设 $f(x, y)$ 和 $h(x, y)$ 为两幅输入图像，则：
- 图像相加运算：$g(x, y) = f(x, y) + h(x, y)$
- 图像相减运算：$C(x, y) = f(x, y) - h(x, y)$
- 图像相乘运算：$C(x, y) = f(x, y) \times h(x, y)$
- 图像相除运算：$C(x, y) = f(x, y) {\div} h(x, y)$
### 图像减运算
- 两幅图像相减举例
![](https://s2.loli.net/2023/02/02/WAO8wJh5bin9IsF.png)
- 减去背景噪声：当一光学系统存在背景噪声时，可以将由该光学系统拍摄的相片与背景处相减，除去背景噪声（缓慢变化的加性非随机噪声）
- 减去背景：当只需要观察前景图像时，将背景图像减去
- 运动检测：当一场景有运动物体时，可以通过与没有任何运动物体时拍摄下来的照片相减，检测出运动的物体；将时间较近的两幅图像相减也可以检测出是否存在运动的物体
- 去除不需要的叠加性图案：例如电视制作的蓝屏技术
![](https://s2.loli.net/2023/02/02/TYbEPGJxz3afp17.png)
- 求差值图像：将两幅在对应像素上具有相关性的图像（如视频在时间上较近的两幅图像等）相减，得到的差值图像（幅值一般都较小）
![](https://s2.loli.net/2023/02/02/LkqcUxVBw2hM58j.png)
### 图像加运算
- 两幅图像相加举例
![](https://s2.loli.net/2023/02/02/CYcuF3ywb2LXMdn.png)
- 通过求平均值降噪
  - 当某一静止场景的多幅图像被随机噪声所污染，可以通过将这些图像相加，提高图像的信噪比，降低随机噪声对图像的干扰
  - 假设单幅图像的功率信噪比为 $p(x, y)$，则 M 幅图像相加求平均值后，功率信噪比提高 $M$ 倍，即等于 $M \times p(x, y)$
  - 举例：由于大气湍流及空气中微粒污染，使星空的照片受到随机干扰
  ![](https://s2.loli.net/2023/02/02/9zwLWUsOyEMFnKd.png)
- 图像叠加：将两幅图像透明叠加在一起（相当于二次曝光）
![](https://s2.loli.net/2023/02/02/rKHdvAFhqYpyBfi.png)
### 图像乘运算
- 图像标定：图像数字化仪器对一幅图像各点的敏感程度有可能不同，对每一点（像素）乘上一个系数，可以纠正这一影响。
- 图像掩膜
  - 在需要被完整保留下来的区域，掩膜图像的值为 1，而在需要抑制掉的区域，掩膜图像的值为 0。将原图像乘掩膜图像，可抹去图像的相应部分。
  ![](https://s2.loli.net/2023/02/02/cIAbkMo7KnwLBsP.png)
  - 利用一个互补的掩膜图像，乘上另一幅图像，将两幅图像相加，可以得到一幅新的图像。
  ![](https://s2.loli.net/2023/02/02/Nmxse1wFZ3RlzEP.png)
## 直方图运算
### 直方图定义
- 图像直方图的定义（1）
一个灰度级在范围 [0, L - 1] 的数字图像的直方图是一个离散函数:
$$h(r_k) = n_k$$
$n_k$ 是图像中灰度级为 $r_k$ 的像素个数，$r_k$ 是第 k 个灰度级，k = 0, 1, ..., L - 1
由于 $r_k$ 的增量是 1，直方图可表示为：
$$p(k) = n_k$$
即，图像中不同灰度级像素出现的次数。
- 图像直方图的定义（2）
一个灰度级在范围 [0, L - 1] 的数字图像的直方图是一个离散函数：
$$p(r_k) = \frac{n_k}{n}$$
$n$ 是图像的像素总数，$n_k$ 是图像中灰度级为 $r_k$ 的像素个数，$r_k$ 是第 k 个灰度级，k = 0, 1, ..., L - 1
- 两种直方图定义的比较
$$h(r_k) = n_k     (1)$$
$$p(r_k) = \frac{n_k}{n}     (2)$$
其中，(2)：
- 使函数值正则化到 [0, 1] 区间，成为实数函数
- 函数值的范围与像素的总数无关
- 给出灰度级 $r_k$ 在图像中出现的概率密度统计
![](https://s2.loli.net/2023/02/02/thyDqNT3sif81lU.png)
注意：**直方图仅仅描述了图像中像素的灰度级分布，但没有描述像素的空间关系。**
### 直方图均衡化
![](https://s2.loli.net/2023/02/02/VcS63adI1MmzirL.png)
直方图应用举例———直方图均衡化
- 希望一幅图像的像素占有全部可能的灰度级且分布均匀，能够具有高对比度
- 使用的方法是灰度级变换：$s = T(r)$
- 基本思想是把原始图的直方图变换为均匀分布的形式，这样就增加了像素灰度值的动态范围，从而达到增强图像整体对比度的效果

$$s = T(r)    0 ≤ r ≤ 1$$
$T(r)$ 满足一下两个条件：
1. $T(r)$ 在区间 $0 ≤ r ≤ 1$ 中为单值且单调递增
保证原图各灰度级在变换后仍保持从黑到白（或从白到黑）的排列次序
2. 当 $0 ≤ r ≤ 1$ 时，$0 ≤ T(r) ≤ 1$
保证变换前后灰度值动态范围的一致性

### 直方图均衡化实现
考虑一个离散的灰度图像 {x}，让 ni 表示灰度 i 出现的次数，这样图像中灰度为 i 的像素的出现概率是：
$$p_x(i) = p(x=i) = \frac{n_i}{n},\quad 0 \le i < L$$
L 是图像中所有的灰度数（通常为256），n 是图像中所有的像素数，$p_x(i)$ 实际上是像素值为 i 的图像的直方图，归一化到 [0, 1]。
把对应于 px 的累积分布函数，定义为：
$$cdf_x(i) = \sum_{j=0}^i p_x(j)$$
是图像的累计归一化直方图。
我们创建一个形式为 y = T(x) 的变换，对于原始图像中的每个值它就产生一个 
y，这样 y 的累计概率函数就可以在所有值范围内进行线性化，转换公式定义为：
$$cdf_y(i) = iK$$
对于常数 K。CDF的性质允许我们做这样的变换（参见逆分布函数）；定义为：
$$cdf_y(y^\prime) = cdf_y(T(k)) = cdf_x(k)$$
其中 k 属于区间 [0,L)。注意 T 将不同的等级映射到 0..1 域，为了将这些值映射回它们最初的域，需要在结果上应用下面的简单变换：
$$y^\prime = y \cdot(\max\{x\} - \min\{x\}) + \min\{x\}$$
上面描述了灰度图像上使用直方图均衡化的方法，但是通过将这种方法分别用于图像RGB颜色值的红色、绿色和蓝色分量，从而也可以对彩色图像进行处理。
实际上，对彩色分量rgb分别做均衡化，会产生奇异的点，图像不和谐。一般采用的是用HSL和HSV色彩空间进行亮度的均衡即可。
### 直方图均衡化例子
下面的这个例子是一个8位的8×8灰度图像：
$$\begin{bmatrix}
 52 & 55 & 61 & 66 & 70 & 61 & 64 & 73 \\
 63 & 59 & 55 & 90 & 109 & 85 & 69 & 72 \\
 62 & 59 & 68 & 113 & 144 & 104 & 66 & 73 \\
 63 & 58 & 71 & 122 & 154 & 106 & 70 & 69 \\
 67 & 61 & 68 & 104 & 126 & 88 & 68 & 70 \\
 79 & 65 & 60 & 70 & 77 & 68 & 58 & 75 \\
 85 & 71 & 64 & 59 & 55 & 61 & 65 & 83 \\
 87 & 79 & 69 & 68 & 65 & 76 & 78 & 94
\end{bmatrix}$$
该灰度图像的灰度值出现次数如下表所示，为了简化表格，出现次数为0的值已经被省略。
| 灰度值 | 出现次数 | 灰度值 | 出现次数 | 灰度值 | 出现次数 | 灰度值 | 出现次数 | 灰度值 | 出现次数 |
|:------:|:--------:|:------:|:--------:|:------:|:--------:|:------:|:--------:|:------:|:--------:|
|   52   |     1    |   64   |     2    |   72   |     1    |   85   |     2    |   113  |     1    |
|   55   |     3    |   65   |     3    |   73   |     2    |   87   |     1    |   122  |     1    |
|   58   |     2    |   66   |     2    |   75   |     1    |   88   |     1    |   126  |     1    |
|   59   |     3    |   67   |     1    |   76   |     1    |   90   |     1    |   144  |     1    |
|   60   |     1    |   68   |     5    |   77   |     1    |   94   |     1    |   154  |     1    |
|   61   |     4    |   69   |     3    |   78   |     1    |   104  |     2    |        |          |
|   62   |     1    |   70   |     4    |   79   |     2    |   106  |     1    |        |          |
|   63   |     2    |   71   |     2    |   83   |     1    |   109  |     1    |        |          |
累积分布函数（cdf）如下所示，与上一表格类似，为了简化，累积分布函数值为0的灰度值已经被省略。
| 灰度值 | cdf | 灰度值 | cdf | 灰度值 | cdf | 灰度值 | cdf | 灰度值 | cdf |
|:------:|:---:|:------:|:---:|:------:|:---:|:------:|:---:|:------:|:---:|
|   52   |  1  |   64   |  19 |   72   |  40 |   85   |  51 |   113  |  60 |
|   55   |  4  |   65   |  22 |   73   |  42 |   87   |  52 |   122  |  61 |
|   58   |  6  |   66   |  24 |   75   |  43 |   88   |  53 |   126  |  62 |
|   59   |  9  |   67   |  25 |   76   |  44 |   90   |  54 |   144  |  63 |
|   60   |  10 |   68   |  30 |   77   |  45 |   94   |  55 |   154  |  64 |
|   61   |  14 |   69   |  33 |   78   |  46 |   104  |  57 |        |     |
|   62   |  15 |   70   |  37 |   79   |  48 |   106  |  58 |        |     |
|   63   |  17 |   71   |  39 |   83   |  49 |   109  |  59 |        |     |
如表格所示，灰度值最小值为52，最大值为154。 通常，直方图均衡化算式如下：
$$h(v)=\mathrm {round} \left({\frac {cdf(v)-cdf_{min}}{cdf_{max}-cdf_{min}}}\times (L-1)\right)$$
累积分布函数最小值 $cdf_min$ 在本例中为1，最大值 $cdf_max$ 在本例中为 64，而 L 则是灰度级数（如本例中，图像为8位深度，则灰度级数共有 $2^8=256$ 级数,这也是最常见的灰度级数）。则对于本例的直方图均衡化算式为：
$$h(v) = \mathrm {round} \left(\frac{cdf(v) - 1} {63}\times 255\right)$$
例如，灰度为 78 的像素的累积分布函数为 46，均衡化后，灰度值变化为：
$$h(78) = \mathrm {round} \left(\frac {46 - 1} {63} \times 255\right)=\mathrm{round} \left(0.714286 \times 255\right) = 182$$
直方图均衡化后，图像的灰度值变化如下表所示：
$$\begin{bmatrix}
   0 &  12 &  53 &  93 & 146 &  53 &  73 & 166 \\
  65 &  32 &  12 & 215 & 235 & 202 & 130 & 158 \\
  57 &  32 & 117 & 239 & 251 & 227 &  93 & 166 \\
  65 &  20 & 154 & 243 & 255 & 231 & 146 & 130 \\
  97 &  53 & 117 & 227 & 247 & 210 & 117 & 146 \\
 190 &  85 &  36 & 146 & 178 & 117 &  20 & 170 \\
 202 & 154 &  73 &  32 &  12 &  53 &  85 & 194 \\
 206 & 190 & 130 & 117 &  85 & 174 & 182 & 219 
\end{bmatrix}$$
注意：原最小灰度值52变为了0，而最大灰度值154变为了255。
![](https://s2.loli.net/2023/02/03/Er3iZJwbuQXgyqf.png)

> 实现和例子来自维基百科，PPT看不懂了。。
---

# 第二章 空间滤波

---

# 第三章 模式识别导论

---

# 第三章 SIFT 特征

---

# 第三章 LBP 特征

---

# 第三章 贝叶斯决策

---

# 第三章 识别系统实例：纸币、指掌纹

---

# 第三章 识别系统实例：人脸识别

---

# 第四章 神经网络、深度卷积网络